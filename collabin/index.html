<!DOCTYPE html>
<html lang="en">
  <head>
 	<meta charset="utf-8">
    <title>collabIN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="collabIN">
    <meta name="author" content="@re2005">
     <link rel="shortcut icon" href="public/img/favicon.png">
<style>
/*
 ______     ______     ______    
/\  == \   /\  == \   /\  == \   
\ \  __<   \ \  __<   \ \  __<   
 \ \_\ \_\  \ \_\ \_\  \ \_\ \_\ 
  \/_/ /_/   \/_/ /_/   \/_/ /_/ 
                                 
CSS Style - Hacher Battle
                                                              
*/

/* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font-size:100%;font:inherit;vertical-align:baseline;margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}
/* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */


.hhh{
	display: none;
}

a:hover
{
	opacity: .7;
}
/* bases */
html {
	height: 100%;
	background: url('../img/bg.png') repeat;
}
body {
	width: 100%;
	height: 100%;
}
body *{
	font-family: 'Dosis', Helvetica, Arial, sans-serif;
}
.wrap {
	width: 344px;
	height: 740px;
	margin: auto;
	display: table;
	background: url('../img/iPhone5.png') no-repeat center top;
}
header {
	width: 252px;
	height: 447px;
	background: url('../img/bg_dark.png') repeat;
	margin: 165px 0 0 49px;
	display: table;
	overflow: auto; /* For browsers that can't do overflow-y */
	overflow-y: scroll
}

nav {
	display: block;
	float: left;
	height: 450px;
	overflow: auto;
	width: 252px;
}
nav .content {
	float: left;
}

.login {
	float: left;
	width: 252px;
}
.login h1 {
	background: url('../img/login_sprites.png') no-repeat center top;
	width: 100%;
	height: 315px;
	float: left;
	clear: both;
}
.login span.IN-widget {
	float: left;
	background: url('../img/login_sprites.png') no-repeat center bottom;
	width: 100%;
	height: 65px;
	clear: both;
	margin-top: 40px;
}
.login span.IN-widget:hover {
	opacity: 0.7;
}
.clear{
	overflow: hidden;
	display: block;
	text-indent: -9999px;
}

.bg2 {
	background: url('../img/bg_dark2.png') repeat;
}
.bg3 {
	background: url('../img/bg_dark3.png') repeat;
}
.bgblue {
	background: url('../img/bg_blue.png') repeat;
}

h1
{
	background: url('../img/dash_sprites.png') no-repeat center top;
	width: 100%;
	height: 80px;
	float: left;
	clear: both;
}

.newp {
	background: url('../img/dash_sprites.png') no-repeat center -85px, url('../img/bg_dark2.png') repeat;
	width: 45%;
	height: 110px;
	float: left;
}

.coll {
	background: url('../img/dash_sprites.png') no-repeat center -198px, url('../img/bg_dark2.png') repeat;
	width: 45%;
	height: 110px;
	float: right;
}
.blue {
	color: #4ecaff;
}
.titulo, input {
	padding: 3% 5%;
	margin-top: 20px;
	float: left;
	width: 90%;
	text-shadow: 1px 1px 1px #000000;
	font-size: 1.2em;
}
input {
	padding: 3px;
	text-shadow: none;
	margin: 5px 0 0 0;
	padding: 0;
	width: 100%;
	float: left;
}
.new {
	background: url('../img/icons.png') no-repeat top left;
	width: 50px;
	height: 30px;
	float: right;
	display: block;
	margin-top: -6px;
}
.vol {
	background: url('../img/icons.png') no-repeat top right;
	width: 50px;
	height: 30px;
	float: right;
	display: block;
	margin-top: -6px;

}

ul{
	float: left;
	background: #ccc;
	width: 90%;
	padding: 15px 5%;
	background: url('../img/bg_dark3.png') repeat;
	border-top: 1px #060606 solid;
}
.total{
	color: #8afe4b;
	padding: 0 5px 0 10px;
	text-shadow: 1px 1px 1px #000000;
	font-size: .8em;
}
.projectowner img, .no-img{
	background: #363636;
	border-radius: 36px;
	border: 1px #ccc solid;
	width: 30px;
	height: 30px;
	float: left;
	margin-right: 14px;
	padding: 4px;
}

.dash .projectname{
	color: #fff;
	font-size: 110%;
}
.projecskill{
font-size: 80%;
margin-top: 5px;
	
}

.new-project .newp{
	background: url("../img/dash_sprites.png") no-repeat scroll center -95px, url("../img/bg_dark2.png") repeat scroll 0 0 transparent;
	float: left;
	height: 90px;
	width: 100%;
}
.new-project .projectname {
	margin-bottom: 10px;
	float: left;
	width: 100%;
}

.btn {
	padding: 5% 5%;
	margin-top: 20px;
	float: left;
	width: 90%;
	text-shadow: 1px 1px 1px #000000;
	font-size: 1.2em;
	color: #fff;
	text-decoration: none;
	text-align: center;
}

@media (max-width: 767px) {
	html {
		height: 100%;
		background: url('../img/bg_dark.png') repeat;
	}
	.wrap {
		background: none;
		width: 100%;
		float: left;
	}
	header {
		width: 100%;
		height: 447px;
		background: url('../img/bg_dark.png') repeat;
		display: table;
		margin: 0;
	}
	nav{
		height: 447px;
		background: url('../img/bg_dark.png') repeat;
		display: table;
		width: 100%;
	}
	.login {
		float: left;
		width: 252px;
	}
	.projectname .total{
		float: right;
	}
}
</style>

<link href='http://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'>

<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-2.0.0.js"></script>

<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: iu5ko9x5crh3
  onLoad: onLinkedInLoad
  scope: r_fullprofile
  authorize: true
</script>

<script type="text/javascript">
var socket;
function showTab(tab) {
	$('.login, .dash, .new-project').removeClass('hhh').addClass('hhh');
	$('.' + tab).removeClass('hhh');
}

function onLinkedInLoad() {
	$('span.IN-widget a').attr('style', 'display:block !important; opacity: 0; width: 240px !important; height: 50px !important; clear: both !important;');
}

function onLinkedInAuth() {
	socket = io.connect('http://public.renangoncalves.com', 8080);

	// Hide login, show dash
	showTab('dash');

	var url = '/people/~:(id,first-name,last-name,pictureUrl,skills)';
	IN.API.Raw(url).result(function(result) {
		var data = {
			id: result.id,
			firstName: result.firstName,
			lastName: result.lastName,
			pictureUrl: result.pictureUrl,
			skills: []
		};
		for (var key in result.skills.values) {
			var skill = result.skills.values[key];
			data.skills.push(skill.skill.name);
		}

		socket.emit('member-register', data);
	});

    // When receiving project results
    socket.on('project-results', function (data) {
    	// Delete everything from there
    	$('ul.projects').remove();

    	var total = 0;
        for (key in data) {
        	total++;
            var ul = $('<ul class="projects"><li class="projectowner"><img src=""></li><li class="projectname"><span class="total"></span></li><li class="projectskill blue"></li></ul>');
            if (data[key].img) {
                ul.find('.projectowner img').attr('src', data[key].img);
            }
            else {
                ul.find('.projectowner img').remove();
                ul.find('.projectowner').addClass('no-img clear');
            }
            ul.find('.projectname').html(data[key].name);
            ul.find('.total').html(data[key].duration + 'hrs');
            ul.find('.projectskill').html(data[key].skills.join(', '));
            $('.new').closest('h2').after(ul);
        }

        $('.new').prev().html(total);
    });

    // When receiving project results
    socket.on('myproject-results', function (data) {
    	// Delete everything from there
    	$('ul.myprojects').remove();

    	var total = 0;
        for (key in data) {
        	total++;
            var ul = $('<ul class="myprojects"><li class="projectowner"><img src=""></li><li class="projectname"><span class="total"></span></li><li class="projecskill blue"></li></ul>');
            if (data[key].img) {
                ul.find('.projectowner img').attr('src', data[key].img);
            }
            else {
                ul.find('.projectowner img').remove();
                ul.find('.projectowner').addClass('no-img clear');
            }
            ul.find('.projectname').html(data[key].name);
            ul.find('.total').html(data[key].duration + 'hrs');
            ul.find('.projectskill').html(data[key].skills.join());
            $('.new').closest('h2').after(ul);
        }

        $('.mynew').prev().html(total);
    });

    // When receiving member results
    socket.on('member-results', function (data) {
    	var total = 0;
        for (key in data) {
        	total++;
            var ul = $('<ul><li class="projectowner"><img src=""></li><li class="projectname"></li><li class="projecskill blue"></li></ul>');
            if (data.pictureUrl) {
                ul.find('.projectowner img').attr('src', data.pictureUrl);
            }
            ul.find('.projectname').html(data[key].firstName + ' ' + data[key].lastName);
            ul.find('.projectskill').html(data[key].skills.join());
            $('.vol').closest('h2').after(ul);
		}

		$('.vol').prev().html(total);
    });

    $('.dash .newp').click(function (e) {
    	e.preventDefault();
    	showTab('new-project');
    });

    $('.btn').click(function (e) {
        e.preventDefault();
        var inputs = ['name', 'img', 'skills'];
        var data = {};
        for (var key in inputs) {
        	var name = inputs[key],
        		input = $('#' + name);
        	data[name] = input.val();
        	input.val('');
        }
        data.skills.replace(/, /g, ',');
        data.skills.replace(/ /g, '');
        data.skills = data.skills.split(',');

        socket.emit('project-register', data);

        showTab('dash');
    });
}
</script>

</head>

<body>

<div class="wrap">
	<header>
	<nav>
	
<!-- login -->
	<div class="login">
	<h1 class="clear">collabIN</h1>

	<script type="in/Login" data-onAuth="onLinkedInAuth">
	Hello, <?js= firstName ?> <?js= lastName ?>.
	</script>

	</div>
	
	
<!-- Dashboard -->
<div class="dash hhh">
	<h1 class="clear">collabIN</h1>
	<a href="#" class="newp bg2 clear">new project</a>
	<a href="#" class="coll bg2 clear">collaborate</a>
	
	<h2 class="bg2 titulo blue">MY PROJECTS <span class="total">0</span><i class="mynew"></i></h2>
    <!-- Projects -->

<!-- Projects -->
	<h2 class="bg2 titulo blue">PROJECTS <span class="total">0</span><i class="new"></i></h2>
    <!-- Projects -->
	
<!-- Professional -->
	<h2 class="bg2 titulo blue">VOLUNTEERS <span class="total">0</span><i class="vol"></i></h2>
</div>

<!-- Dashboard -->
<div class="new-project hhh">
	<h1 class="clear">collabIN</h1>
	<h2 class="clear newp bg2">New Project</h2>
	<h3 class="titulo bg2 blue ">DETAILS</h3>
	<ul>
	<li class="projectname blue">
	Project name <input type="text" id="name" name="name" placeholder="Project Name">
	</li>
	<li class="projectname blue">
	Logo Url <input type="text" id="img" name="img" placeholder="http://www.collabin.nl/">
	</li>
	<li class="projecskill blue">Skills<input type="text" id="skills" name="skills" placeholder="Comma separated"></li>
	</ul>

	<a href="#" class="bgblue btn">CREATE</a>
</div>
	
	
	</nav>
	</header>
</div>


</body>

</html>
